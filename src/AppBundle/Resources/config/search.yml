parameters:
    wamcar.search.config:
        settings:
            number_of_shards : 1
            number_of_replicas : 1
            analysis:
                analyzer:
                    default:
                        type:         custom
                        tokenizer:    nGram
                        filter:       [stopwords, asciifolding, uppercase, elision, worddelimiter, snowball]
                        char_filter:  [custom_char_filter]
                    default_search:
                        type:         custom
                        tokenizer:    standard
                        filter:       [asciifolding, uppercase, elision, worddelimiter, snowball]
                tokenizer:
                    nGram:
                        type:       nGram
                        min_gram:   2
                        max_gram:   15
                filter:
                    stopwords:
                        type:       stop
                        stopwords:  [_french_]
                        ignore_case: true
                    snowball:
                        type:       snowball
                        language:   French
                    worddelimiter:
                        type:       word_delimiter
                    elision:
                         type:      elision
                         articles:  [l, m, t, qu, n, s, j, d]
                char_filter:
                    custom_char_filter:
                        type: html_strip
        mappings:
            vehicle_info:
                _source : { enabled : true }
                properties:
                    ktypNumber:
                        type: string
                        index: not_analyzed
                    make:
                        type: string
                        index: not_analyzed
                    model:
                        type: string
                        index: not_analyzed
                    modelUppercase:
                        type: string
                        index: not_analyzed
                    modelVersion:
                        type: string
                        index: not_analyzed
                    engineCode:
                        type: string
                        index: not_analyzed
                    engine:
                        type: string
                        index: not_analyzed
                    engineUppercase:
                        type: string
                        index: not_analyzed
                    startDate:
                        type: date
                        index: not_analyzed
                    endDate:
                        type: date
                        index: not_analyzed
                    engineSize:
                        type: float
                        index: not_analyzed
                    horsePower:
                        type: integer
                        index: not_analyzed
                    body:
                        type: string
                        index: not_analyzed
                    wheelDrive:
                        type: string
                        index: not_analyzed
                    fuel:
                        type: string
                        index: not_analyzed
                    nbCylinders:
                        type: integer
                        index: not_analyzed
                    nbValve:
                        type: integer
                        index: not_analyzed
            pro_vehicle:
                _source : { enabled : true }
                properties:
                    garageId:
                        type: integer
                    sortingPrice:
                        type: integer
                    sortingDate:
                        type: date
                    location:
                        type: geo_point
                    mileage:
                        type: integer
                    years:
                        type: integer
                    transmission:
                        type: string
                        index: not_analyzed
                    nbPicture:
                        type: long
                    nbPositiveLikes:
                        type: long
                    googleRating:
                        type: float
            personal_vehicle:
                _source : { enabled : true }
                properties:
                    userId:
                        type: integer
                    sortingDate:
                        type: date
                    location:
                        type: geo_point
                    mileage:
                        type: integer
                    years:
                        type: integer
                    transmission:
                        type: string
                        index: not_analyzed
                    nbPicture:
                        type: long
                    nbPositiveLikes:
                        type: long
            personal_project :
                _source: { enabled : true }
                properties:
                    sortingDate:
                        type: date
                    make:
                        type: string
                        index: not_analyzed
                    model:
                        type: string
                        index: not_analyzed
            city:
                _source : { enabled : true }
                properties:
                    postalCode:
                        type: string
                        index: not_analyzed
                    cityName:
                        type: string
                        index: not_analyzed
            pro_user:
                _source : { enabled : true }
                properties:
                    type: { type: string }
                    firstName: { type: string }
                    lastName: { type: string }
                    description:
                        type: string
                        index: not_analyzed
                    descriptionLength: { type: integer }
                    maxGaragesGoogleRating: { type: double }
                    hasAvatar: { type: integer }
                    garages:
                        properties:
                            garageName: { type: string }
                            garagePresentation:
                                type: string
                                index: not_analyzed
                            garageCityName: { type: string }
                            garageLocation: { type: geo_point }
                            garageGoogleRating: { type: double }

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: true

    Novaway\ElasticsearchClient\Index:
        arguments:
            - ['%env(ELASTIC_HOST)%:%env(ELASTIC_PORT)%'] #define it in the parameter.yml file
            - 'wamcar_index_%env(ELASTIC_ENVIRONMENT)%'
            - '%wamcar.search.config%'

    Novaway\ElasticsearchClient\ObjectIndexer: ~
    Novaway\ElasticsearchClient\QueryExecutor: ~
    Novaway\ElasticsearchClient\Query\ResultTransformer: ~
